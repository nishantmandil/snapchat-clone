(this["webpackJsonpsnapchat-clone"]=this["webpackJsonpsnapchat-clone"]||[]).push([[0],{80:function(e,t,c){},81:function(e,t,c){},85:function(e,t,c){},89:function(e,t,c){},92:function(e,t,c){},93:function(e,t,c){},96:function(e,t,c){},97:function(e,t,c){},98:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),s=c(29),i=c.n(s),r=(c(80),c(81),c(53)),o=c.n(r),l=c(44),j=c.n(l),d=c(35),u=Object(d.b)({name:"camera",initialState:{cameraImage:null},reducers:{setCameraImage:function(e,t){e.cameraImage=t.payload},resetCameraImage:function(e){e.cameraImage=null}}}),h=u.actions,m=h.setCameraImage,b=h.resetCameraImage,p=function(e){return e.camera.cameraImage},O=u.reducer,f=c(11),g=c(10),x=(c(85),c(4)),v={width:250,height:400,facingMode:"user"};var _=function(){var e=Object(a.useRef)(null),t=Object(f.b)(),c=Object(g.f)(),n=Object(a.useCallback)((function(){var a=e.current.getScreenshot();t(m(a)),c.push("/preview")}),[e]);return Object(x.jsxs)("div",{className:"webcamCapture",children:[Object(x.jsx)(o.a,{audio:!1,height:v.height,ref:e,screenshotFormat:"image/jpeg",width:v.width,videoConstraints:v}),Object(x.jsx)(j.a,{className:"webcamCapture__button",onClick:n,fontSize:"large"})]})},w=c(31),N=(c(89),c(59)),I=c.n(N),C=c(60),k=c.n(C),S=c(61),y=c.n(S),P=c(62),z=c.n(P),U=c(63),B=c.n(U),D=c(64),R=c.n(D),T=c(65),A=c.n(T),E=c(66),F=c.n(E),L=c(67),W=c.n(L),K=c(115),M=c(33),V=M.a.initializeApp({apiKey:"AIzaSyDflvxK_iovCRevYzgydLzZvouP9P7SC3M",authDomain:"snapchat-n.firebaseapp.com",projectId:"snapchat-n",storageBucket:"snapchat-n.appspot.com",messagingSenderId:"987059705931",appId:"1:987059705931:web:905611e3aadd8b3cf415ce",measurementId:"G-5XT9SQCK0D"}).firestore(),G=M.a.auth(),J=M.a.storage(),Q=new M.a.auth.GoogleAuthProvider,X=Object(d.b)({name:"app",initialState:{user:null,selectedImage:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null},selectImage:function(e,t){e.selectedImage=t.payload},resetImage:function(e){e.selectedImage=null}}}),Y=X.actions,Z=Y.login,$=Y.logout,q=Y.selectImage,H=(Y.resetImage,function(e){return e.app.user}),ee=function(e){return e.app.selectedImage},te=X.reducer;var ce=function(){var e=Object(f.c)(p),t=Object(g.f)(),c=Object(f.b)(),n=Object(f.c)(H);return Object(a.useEffect)((function(){e||t.replace("/")}),[e,t]),Object(x.jsxs)("div",{className:"preview",children:[Object(x.jsx)(I.a,{onClick:function(){c(b())},className:"preview__close"}),Object(x.jsxs)("div",{className:"preview__toolbarRight",children:[Object(x.jsx)(k.a,{}),Object(x.jsx)(y.a,{}),Object(x.jsx)(z.a,{}),Object(x.jsx)(B.a,{}),Object(x.jsx)(R.a,{}),Object(x.jsx)(A.a,{}),Object(x.jsx)(F.a,{})]}),Object(x.jsx)("img",{src:e,alt:""}),Object(x.jsxs)("div",{onClick:function(){var c=Object(K.a)();J.ref("posts/".concat(c)).putString(e,"data_url").on("state_changed",null,(function(e){console.log(e)}),(function(){J.ref("posts").child(c).getDownloadURL().then((function(e){V.collection("posts").add({imageUrl:e,username:"nishant",read:!1,profilePic:n.profilePic,timestamp:M.a.firestore.FieldValue.serverTimestamp()}),t.replace("/chats")}))}))},className:"preview__footer",children:[Object(x.jsx)("h2",{children:"Send Now"}),Object(x.jsx)(W.a,{fontSize:"small",className:"preview__sendIcon"})]})]})},ae=c(73),ne=c(116),se=(c(92),c(70)),ie=c.n(se),re=c(71),oe=c.n(re),le=(c(93),c(69)),je=c.n(le),de=c(68),ue=c.n(de);var he=function(e){var t=e.id,c=e.profilePic,a=e.username,n=e.timestamp,s=e.imageUrl,i=e.read,r=Object(f.b)(),o=Object(g.f)();return Object(x.jsxs)("div",{onClick:function(){i||(r(q(s)),V.collection("posts").doc(t).set({read:!0},{merge:!0}),o.push("/chats/view"))},className:"chat",children:[Object(x.jsx)(ne.a,{className:"chat__avatar",src:c}),Object(x.jsxs)("div",{className:"chat__info",children:[Object(x.jsx)("h4",{children:a}),Object(x.jsxs)("p",{children:[!i&&"Tap to view-"," ",Object(x.jsx)(ue.a,{date:new Date(null===n||void 0===n?void 0:n.toDate()).toUTCString()})]})]}),!i&&Object(x.jsx)(je.a,{className:"chat__readIcon"})]})};var me=function(){var e=Object(a.useState)([]),t=Object(ae.a)(e,2),c=t[0],n=t[1],s=Object(f.c)(H),i=Object(f.b)(),r=Object(g.f)();return Object(a.useEffect)((function(){V.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(x.jsxs)("div",{className:"chats",children:[Object(x.jsxs)("div",{className:"chats__header",children:[Object(x.jsx)(ne.a,{src:s.profilePic,onClick:function(){return G.signOut()},className:"chats__avatar"}),Object(x.jsxs)("div",{className:"chats__search",children:[Object(x.jsx)(ie.a,{className:"chats__searchIcon"}),Object(x.jsx)("input",{placeholder:"Friends",type:"text"})]}),Object(x.jsx)(oe.a,{className:"chats__chatIcon"})]}),Object(x.jsx)("div",{className:"chats__posts",children:c.map((function(e){var t=e.id,c=e.data,a=c.profilePic,n=c.username,s=c.timestamp,i=c.imageUrl,r=c.read;return Object(x.jsx)(he,{id:t,username:n,timestamp:s,imageUrl:i,read:r,profilePic:a},t)}))}),Object(x.jsx)(j.a,{className:"chats__takePicIcon",onClick:function(){i(b()),r.push("/")},fontSize:"large"})]})},be=(c(96),c(72));var pe=function(){var e=Object(f.c)(ee),t=Object(g.f)();Object(a.useEffect)((function(){e||c()}),[e]);var c=function(){t.replace("/chats")};return Object(x.jsxs)("div",{className:"chatView",children:[Object(x.jsx)("img",{onClick:c,src:e}),Object(x.jsx)("div",{className:"chatView__timer",children:Object(x.jsx)(be.CountdownCircleTimer,{isPlaying:!0,duration:10,strokeWidth:6,size:50,colors:[["#004777",.33],["#f7B801",.33],["#A30000",.33]],children:function(e){var t=e.remainingTime;return 0==t&&c(),t}})})]})},Oe=c(114);c(97);var fe=function(){var e=Object(f.b)();return Object(x.jsx)("div",{className:"login",children:Object(x.jsxs)("div",{className:"login__container",children:[Object(x.jsx)("img",{src:"https://scx2.b-cdn.net/gfx/news/2017/1-snapchat.jpg",alt:""}),Object(x.jsx)(Oe.a,{variant:"outlined",onClick:function(){G.signInWithPopup(Q).then((function(t){e(Z({username:t.user.displayName,profilePic:t.user.photoURL,id:t.user.uid}))})).catch((function(e){return alert(e.message)}))},children:"Sign In"})]})})};var ge=function(){var e=Object(f.c)(H),t=Object(f.b)();return Object(a.useEffect)((function(){G.onAuthStateChanged((function(e){t(e?Z({username:e.displayName,profilePic:e.photoURL,id:e.uid}):$())}))}),[]),Object(x.jsx)("div",{className:"app",children:Object(x.jsx)(w.a,{children:e?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("img",{className:"app__logo",src:"https://lakeridgenewsonline.com/wp-content/uploads/2020/04/snapchat.jpg",alt:""}),Object(x.jsx)("div",{className:"app__body",children:Object(x.jsx)("div",{className:"app__bodyBackground",children:Object(x.jsxs)(g.c,{children:[Object(x.jsx)(g.a,{path:"/chats/view",children:Object(x.jsx)(pe,{})}),Object(x.jsx)(g.a,{path:"/chats",children:Object(x.jsx)(me,{})}),Object(x.jsx)(g.a,{path:"/preview",children:Object(x.jsx)(ce,{})}),Object(x.jsx)(g.a,{exact:!0,path:"/",children:Object(x.jsx)(_,{})})]})})})]}):Object(x.jsx)(fe,{})})})},xe=Object(d.a)({reducer:{app:te,camera:O}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(f.a,{store:xe,children:Object(x.jsx)(ge,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[98,1,2]]]);
//# sourceMappingURL=main.41619f79.chunk.js.map